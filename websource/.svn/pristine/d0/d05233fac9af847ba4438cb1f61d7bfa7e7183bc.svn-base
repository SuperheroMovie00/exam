/* build time:Mon Dec 24 2012 18:19:49 GMT+0800 (\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4) */
KISSY.add("market/scrollFollow",function(a){function f(b){b=b||{},a.isString(b)?this.followEl=b:a.each(e,function(a,c){this[c]=b[c]||a},this),this.init()}var b=a.DOM,c=a.Event,d=a.UA.ie===6?50:10,e={followEl:"",fixTop:!1};return f.prototype={constructor:f,init:function(){this.followEl=a.one(this.followEl);if(!this.followEl)return;this.top||(this.top=this.followEl.offset().top),this.cssPosition=this.followEl.css("position"),this.cssWidth=this.followEl.css("width"),this.hander={},this._bind()},_bind:function(){c.on(window,"scroll",function(){var b=this.hander;b.cancel&&b.cancel(),this.hander=a.later(this.resetPosition,d,!1,this)},this)},resetPosition:function(){var a=parseInt(b.scrollTop(window),10),c=this.followEl,d=+this.top;a>d?this.fixIt(a):a<d&&(this.status!=="auto"&&(c.css({position:this.cssPosition,top:d,width:""}),this.status="auto"),this.fixTop&&(this.top=c.offset().top))},fixIt:function(b){var c=this.followEl,d=this.top;a.UA.ie===6?c.css({position:"absolute",top:b,width:this.cssWidth}):this.status!=="follow"&&c.css({position:"fixed",top:0,width:this.cssWidth}),this.status="follow"}},f});